# Dignity

A CLI tool for displaying Claude Code token metrics in your status line.

## Installation

```bash
uv pip install -e .
```

## Usage

```bash
dignity <path_to_transcript.jsonl>
```

The CLI reads a Claude Code transcript file (in JSONL format) and outputs token usage metrics suitable for display in a status line:

```
In: 3.5K | Out: 1.8K | Cache: 12.5K | Total: 17.8K | Ctx: 9.5K
```

### Metrics Explained

- In: Input tokens (tokens sent to Claude)
- Out: Output tokens (tokens generated by Claude)
- Cache: Cached tokens (cache reads + cache creation)
- Total: Total tokens used (input + output + cache)
- Ctx: Context length (tokens in the most recent message)

### Integration with Status Lines

You can integrate this with your shell's status line (e.g., in your `.bashrc`, `.zshrc`, or tmux configuration):

```bash
# Example for bash/zsh prompt
export PS1='$(dignity ~/.claude/transcript.jsonl) $ '
```

## Development

### Running Tests

```bash
uv run pytest tests/
```

### Features

- Handles invalid JSON lines gracefully
- Excludes sidechain messages from context calculation
- Excludes API error messages from context calculation
- Returns zero metrics for nonexistent files
- Uses most recent timestamped message for context length
